function predictableRandom(e){let t=232344573*Math.pow(e%97,4.3);const r=15485863,o=521791;t=t*r%o;for(let a=0;a<e*e%90+90;a++)t=t*r%o;return t/o}function randomSymbol(){return String.fromCharCode(Math.floor(50*Math.random())+192)}hasLoaded={status:!1};const wordShift={wordCycle(e,t=!1){const r=e.length,o=Math.floor(Date.now()/250)%(5*r),a=Date.now()/250%(5*r)%5,n=Math.floor(o/5);let l=e[n].text;if(a<.6?l=this.blendWords(e[(n+e.length-1)%e.length].text,e[n].text,(a+.6)/1.2):a>4.4&&(l=this.blendWords(e[n].text,e[(n+1)%e.length].text,(a-4.4)/1.2)),l=this.randomCrossWords(l,.1*Math.pow(a-2.5,4)-.6),t)return l;Math.max(...e.map(e=>e.text.length)),l.length;return{text:l,color:mergeColor(e[(n+r-1)%r].color,e[n].color,a)}},randomCrossWords(e,t=.7){if(t<=0)return e;const r=e.split("");for(let e=0;e<r.length*t;e++){r[Math.floor(predictableRandom(Math.floor(Date.now()/500)%964372+1.618*e)*r.length)]=randomSymbol()}return r.join("")},blendWords:(e,t,r)=>r<=0?e:r>=1?t:e.substring(0,e.length*(1-r))+t.substring(t.length*(1-r),t.length)};class cheatError extends Error{constructor(e){super(e),this.name="CheatError"}}function hard_reset(){player={points:E(10),total:E(10),best:E(10),currentPage:1,singleDMult:E(2),dims:[null,[E(10),E(10),E(1),E(0),E(0),E(0)],[E(100),E(100),E(1),E(0),E(0),E(0)],[E(1e3),E(1e3),E(1),E(0),E(0),E(0)],[E(1e4),E(1e4),E(1),E(0),E(0),E(0)],[E(1e5),E(1e5),E(1),E(0),E(0),E(0)],[E(1e6),E(1e6),E(1),E(0),E(0),E(0)],[E(1e7),E(1e7),E(1),E(0),E(0),E(0)],[E(1e8),E(1e8),E(1),E(0),E(0),E(0)]],sqrt:{unl:!1,points:E(1),galaxies:E(0)},square:{points:E(0),unl:!1,total:E(0),times:E(0),best:E(0),upgrades:[],chals:[],resetTime:E(0)},autodims:Array(8).fill(!1),canautodim:!1,chal:0,options:{showNewsTicker:!0,hotkey:!0},limitBuyDimNumber:E(1/0),isSetCappedDim:!1,autogalaxy:!1,pmp:{fromsquare:E(0),frompoints:E(0),fromsqrt:E(0)}}}function transformToE(e){for(let t in e)"string"!=typeof e[t]||new E(e[t]).isNaN()||(e[t]=new E(e[t])),"object"==typeof e[t]&&transformToE(e[t])}function save(){localStorage.setItem("pts-inc-rew",formatsave.encode(player))}function deepCopyProps(e,t){for(let r in e)e.hasOwnProperty(r)&&("object"!=typeof e[r]||e[r]instanceof ExpantaNum||null===e[r]?t[r]=e[r]:(t.hasOwnProperty(r)&&null!=t[r]&&Array.isArray(e[r])===Array.isArray(t[r])||(t[r]=Array.isArray(e[r])?[]:{}),deepCopyProps(e[r],t[r])))}function load(){if(hard_reset(),null!=localStorage.getItem("pts-inc-rew")){let e=formatsave.decode(localStorage.getItem("pts-inc-rew"));transformToE(e),deepCopyProps(e,player),fixOldSave()}saveVal=setInterval(save,10),console.error(new cheatError("Cheater's mother is not defined")),loadVue(),hasLoaded.status=!0}function export_copy(){return copyToClipboard(formatsave.encode(player))}function export_file(){let e=formatsave.encode(player),t=new Blob([e],{type:"text/plain"});window.URL=window.URL||window.webkitURL;let r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.download="Points Incremental Save - "+getCurrentBeijingTime()+".txt",r.click()}function getCurrentBeijingTime(){const e=new Date,t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),o=String(e.getUTCDate()).padStart(2,"0"),a=e.getUTCHours(),n=e.getUTCMinutes(),l=e.getUTCSeconds(),i=e.getUTCMilliseconds();let s=(a+8)%24;return s<0&&(e.setUTCDate(e.getUTCDate()+1),s+=24),`${t}-${r}-${o} ${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}.${i.toString().padStart(3,"0")}`}function import_save(){openPopup(1)}function importFromApp(){try{importing_player=formatsave.decode(app.save),transformToE(importing_player),deepCopyProps(importing_player,player),console.clear()}catch(e){addNotify("导入失败")}finally{app.isShowingPopup=0,app.save=""}}function formatted_hard_reset(){confirms=3;for(let e=1;e<3;e++){if(prompt(`请输入${e}以进行第${e}/${confirms}次确认，此操作无法还原!`)!=String(e))return}prompt(`请输入${confirms}以进行最后一次确认，此操作无法还原!`)==String(confirms)&&(hard_reset(),save(),location.reload())}function import_file(){let e=document.createElement("input");e.setAttribute("type","file"),e.click(),e.onchange=(()=>{let t=new FileReader;t.onload=(()=>{let e=t.result;importing_player=formatsave.decode(e),transformToE(importing_player),deepCopyProps(importing_player,player),console.clear()}),t.readAsText(e.files[0])})}var formatsave={encoder:new TextEncoder,decoder:new TextDecoder,startString:"PointsIncrementalRewrittenSaveFormat",endString:"EndOfSaveFile",steps:[{encode:JSON.stringify,decode:JSON.parse},{encode:e=>formatsave.encoder.encode(e),decode:e=>formatsave.decoder.decode(e)},{encode:e=>pako.deflate(e),decode:e=>pako.inflate(e)},{encode:e=>Array.from(e).map(e=>String.fromCharCode(e)).join(""),decode:e=>Uint8Array.from(Array.from(e).map(e=>e.charCodeAt(0)))},{encode:e=>btoa(e),decode:e=>atob(e)},{encode:e=>e.replace(/=+$/g,"").replace(/0/g,"0a").replace(/\+/g,"0b").replace(/\//g,"0c"),decode:e=>e.replace(/0b/g,"+").replace(/0c/g,"/").replace(/0a/g,"0")},{encode:e=>formatsave.startString+e+formatsave.endString,decode:e=>e.slice(formatsave.startString.length,-formatsave.endString.length)}],encode(e){return this.steps.reduce((e,t)=>t.encode(e),e)},decode(e){return this.steps.reduceRight((e,t)=>t.decode(e),e)}};function fixOldSave(){null==player.square.upgrades&&(player.square.upgrades=[]),null==player.square.chals&&(player.square.chals=[]),null==player.square.resetTime&&(player.square.resetTime=E(0)),null==player.options.hotkey&&(player.options.hotkey=!0),null!=player.ptgain&&delete player.ptgain}function copyToClipboard(e){if(document.execCommand("copy")){var t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.opacity=0,t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise((e,r)=>{document.execCommand("copy")?e():r(),t.remove()})}if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)return navigator.clipboard.writeText(e);addNotify("复制失败")}document.addEventListener("DOMContentLoaded",()=>{load()});